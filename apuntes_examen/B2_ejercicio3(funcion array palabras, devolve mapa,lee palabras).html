<!DOCTYPE html>
<html>
  <head>
    <title>Exercicio 3</title>
  </head>
  <body>
    <script>
      /*
            Crea unha función que reciba un array de palabras. A función devolverá un mapa que
            conteña como clave cada palabra e o valor do mapa será o número de veces que esa palabra
            aparece no array. Debemos ler as plabras ata que o usuario cancele dunha forma que ti
            decidas. Unha vez acabe de cargar, amosaremos as repeticións das palabras no array
            */

      // Función para contar as repeticións das palabras nun array
      function contarRepeticionsPalabras(arrayPalabras) {
        var mapaRepeticions = new Map();
        // Contar repeticións das palabras
        for (var i = 0; i < arrayPalabras.length; i++) {
          var palabra = arrayPalabras[i];
          if (mapaRepeticions.has(palabra)) {
            //Se a palabra está no mapa, incrementamos o valor
            mapaRepeticions.set(palabra, mapaRepeticions.get(palabra) + 1);
          } else {
            //Se a palabra non está no mapa, engadimos ao mapa cun valor inicial de 1
            mapaRepeticions.set(palabra, 1);
          }
        }
        return mapaRepeticiones;
      }
      // Función para ler palabras hasta que el usuario cancele
      function lerPalabras() {
        // Crease un array vacío chamado "palabras" para almacenar as palabras do usuario
        var palabras = [];

        // Iniciase unha variable "continuar" en "true" para iniciar o bucle
        var continuar = true;

        //Iniciamos un bucle while que se executará mentres "continuar" sexa "true".
        while (continuar) {
          var palabra = prompt(
            "Introduce unha palabra (ou cancela para terminar):"
          );

          // Verifica se se cancelou a entrada (se se cancelou)
          if (palabra === null) {
            // Se se cancela continuar pasa a "false".
            continuar = false;
          } else {
            // Se se ingresa unha palabra, agregase ao array.
            palabras.push(palabra);
          }
        }
        // Unha vez acabe o bucle, devolve o array que teña todas as palabras ingresadas.
        return palabras;
      }
      // Chamar á función para ler palabras
      var arrayPalabras = leerPalabras();
      // Chamar á función para contar a repetición das palabras
      var mapaRepeticions = contarRepeticionsPalabras(arrayPalabras);
      
      // Amosar as repeticións das palabras nun array.
      console.log("Repeticións das palabras no array:");
      for (var [palabra, repeticions] of mapaRepeticions) {
        console.log(palabra + ": " + repeticions);
      }
    </script>
  </body>
</html>
